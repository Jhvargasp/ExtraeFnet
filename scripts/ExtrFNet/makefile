#**********************************************
# Programa: Makefile creación de libreria
#           para manipular Imágenes tipo tif
# Proyecto: Migración de Imánes de NT Unix
# Autor:    Andrés G. Ventura González
# Fecha:    Abril de 2005
# Fec. Modif. : Agosto 2007
#***********************************************
# crea ExtrFNet

# VARIABLES PARA SAPUF ------------------------------------------------------

LIBAGENTE=/opt/c046/105/lib/
INCAGENTE=/opt/c046/105/include

SHELL=/bin/sh
NULL=
SRCEXE=ExtrFNet
SRCDIR=$(HOME)/src/FileNet/ExtrFNet
SRCDIRLIB=$(HOME)/src/FileNet/libtiff
MYINC=$(SRCDIRLIB)
MYINC2=$(SRCDIR)/Sys
LIBFILENET=/fnsw/client/shobj
INCFILENET=/fnsw/client/include
CC=cc
LD=wal_cc
AR=ar
AROPTS= -rs
OPTIMIZER=
SYBASE=/opt/sybase125
TUXDIR=/opt/tuxedo/V80
CFLAGS = -I$(MYINC) $(OPTIMIZER) -D__STDC__ -D_AIX61
#SYBLIBS= -L$(SYBASE)/$(SYBASE_OCS)/lib -lct -lcs -ltcl -lcomn -lintl -lsybdb -lcl -lm -lBSD -ldld
INCLUDE_DIR=-I${SYBASE}/OCS-12_5/include -I$(TUXDIR)/include
#CFLAGS2= -l,+s $(INCLUDE_DIR) $(SYBLIBS) -I. -I$(MYINC) $(CFLAG) -L$(LIBFILENET) -I$(INCFILENET) -L$(LIBAGENTE) -I$(INCAGENTE) -ldes32sapuf -lagenteSapuf -L${SYBASE}/OCS-12_5/lib -L${TUXDIR}/lib/libfml32.a -Wall -L${TUXDIR}/lib
CFLAGS2= $(INCLUDE_DIR) -I. -I$(MYINC) -I$(INCFILENET) -I$(INCAGENTE) -D__STDC__ -D_AIX61 $(CFLAG) -L$(LIBFILENET) -L$(LIBAGENTE) -ldes32sapuf -lagenteSapuf -brtl

SRCS=tif_aux.c \
	tif_close.c \
	tif_codec.c \
	tif_compress.c \
	tif_dir.c \
	tif_dirinfo.c \
	tif_dirread.c \
	tif_dirwrite.c \
	tif_dumpmode.c \
	tif_error.c \
	tif_fax3.c \
	tif_fax3sm.c \
	tif_flush.c \
	tif_luv.c \
	tif_lzw.c \
	tif_next.c \
	tif_open.c \
	tif_packbits.c \
	tif_predict.c \
	tif_print.c \
	tif_read.c \
	tif_swab.c \
	tif_strip.c \
	tif_thunder.c \
	tif_tile.c \
	tif_unix.c \
	tif_version.c \
	tif_warning.c \
	tif_write.c \
	${NULL}
OBJS=tif_aux.o \
	tif_close.o \
	tif_codec.o \
	tif_compress.o \
	tif_dir.o \
	tif_dirinfo.o \
	tif_dirread.o \
	tif_dirwrite.o \
	tif_dumpmode.o \
	tif_error.o \
	tif_fax3.o \
	tif_fax3sm.o \
	tif_flush.o \
	tif_luv.o \
	tif_lzw.o \
	tif_next.o \
	tif_open.o \
	tif_packbits.o \
	tif_predict.o \
	tif_print.o \
	tif_read.o \
	tif_swab.o \
	tif_strip.o \
	tif_thunder.o \
	tif_tile.o \
	tif_unix.o \
	tif_version.o \
	tif_warning.o \
	tif_write.o \
	TIFFManipulate.o \
	tiffcp.o \
	UtlExtrFNet.o \
	ExtrFNet.o \
	${NULL}
TARGETS=ExtrFNet

all:${TARGETS} clean

$(SRCEXE): ${OBJS}
	${LD} -o ${SRCDIR}/$(@) \
	${CFLAGS2} \
	-lm $?
	@date
	cp $(SRCEXE) $(HOME)/FileNET/bin

#	${AR} ${AROPTS} libtiff.a $?

INCS	= ${SRCDIRLIB}/tiff.h ${SRCDIRLIB}/tiffio.h ${SRCDIRLIB}/tiffconf.h
#INCS2	= ${INCFILENET}/DOC.defs ${INCFILENET}/CKS.defs ${INCFILENET}/IMS.defs \
#	${INCFILENET}/DTI.defs ${INCFILENET}/FP.defs ${INCFILENET}/SQI.defs ${INCFILENET}/FFI.defs
#INCS3	= ${INCFILENET}/DOC.i ${INCFILENET}/CKS.i ${INCFILENET}/IMS.i ${INCFILENET}/CSM.i \
#	${INCFILENET}/DTI.i ${INCFILENET}/FP.i ${INCFILENET}/SQI.i ${INCFILENET}/FFI.i
#INCS4	= ${INCFILENET}/AS_external.h ${INCFILENET}/INX_err.h ${INCFILENET}/FileNet.h ${INCFILENET}/ErrEncode.h
#LINFN	= -l$(LIBFILENET)/libWQS.sl -l$(LIBFILENET)/libCHS.sl -l$(LIBFILENET)/libCSM.sl \
#	-l$(LIBFILENET)/libDOC.sl -l$(LIBFILENET)/libDTI.sl -l$(LIBFILENET)/libFFI.sl \
#	-l$(LIBFILENET)/libFP.sl -l$(LIBFILENET)/libIMS.sl -l$(LIBFILENET)/libINX.sl \
#	-l$(LIBFILENET)/libPRI.sl -l$(LIBFILENET)/libPRS.sl -l$(LIBFILENET)/libSEC.sl \
#	-l$(LIBFILENET)/libSEQ.sl -l$(LIBFILENET)/libBES.sl

${OBJS}: ${MYINC}/tiffio.h ${MYINC}/tiff.h ${MYINC}/tif_dir.h
${OBJS}: ${MYINC}/tiffcomp.h ${MYINC}/tiffiop.h ${MYINC}/tiffconf.h

ALPHA=$(SRCDIRLIB)/distr/tiff.alpha
VERSION=$(SRCDIRLIB)/VERSION

version.h: ${VERSION} ${ALPHA} ${SRCDIRLIB}/mkversion.c
	${CC} -o $(SRCDIRLIB)/mkversion  ${SRCDIRLIB}/mkversion.c
	rm -f ${SRCDIRLIB}/version.h; ${SRCDIRLIB}/mkversion -v ${VERSION} -a ${ALPHA} ${SRCDIRLIB}/version.h
tif_version.o: version.h

#
# The finite state machine tables used by the G3/G4 decoders
# are generated by the mkg3states program.  On systems without
# make these rules have to be manually carried out.
#
tif_fax3sm.c: ${SRCDIRLIB}/mkg3states.c ${SRCDIRLIB}/tif_fax3.h
	${CC} -o mkg3states ${CFLAGS} ${SRCDIRLIB}/mkg3states.c
	rm -f tif_fax3sm.c; ./mkg3states -c const tif_fax3sm.c
tif_aux.o: ${SRCDIRLIB}/tif_aux.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_aux.c
	@echo Ok!
tif_close.o: ${SRCDIRLIB}/tif_close.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_close.c
	@echo Ok!
tif_codec.o: ${SRCDIRLIB}/tif_codec.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_codec.c
	@echo Ok!
tif_compress.o: ${SRCDIRLIB}/tif_compress.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_compress.c
	@echo Ok!
tif_dir.o: ${SRCDIRLIB}/tif_dir.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_dir.c
	@echo Ok!
tif_dirinfo.o: ${SRCDIRLIB}/tif_dirinfo.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_dirinfo.c
	@echo Ok!
tif_dirread.o: ${SRCDIRLIB}/tif_dirread.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_dirread.c
	@echo Ok!
tif_dirwrite.o: ${SRCDIRLIB}/tif_dirwrite.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_dirwrite.c
	@echo Ok!
tif_dumpmode.o: ${SRCDIRLIB}/tif_dumpmode.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_dumpmode.c
	@echo Ok!
tif_error.o: ${SRCDIRLIB}/tif_error.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_error.c
	@echo Ok!
tif_fax3.o: ${SRCDIRLIB}/tif_fax3.c ${SRCDIRLIB}/t4.h ${SRCDIRLIB}/tif_fax3.h
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_fax3.c
	@echo Ok!
tif_flush.o: ${SRCDIRLIB}/tif_flush.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_flush.c
	@echo Ok!
tif_luv.o: ${SRCDIRLIB}/tif_luv.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_luv.c
	@echo Ok!
tif_lzw.o: ${SRCDIRLIB}/tif_lzw.c ${SRCDIRLIB}/tif_predict.h
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_lzw.c
	@echo Ok!
tif_msdos.o: ${SRCDIRLIB}/tif_msdos.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_msdos.c
	@echo Ok!
tif_next.o: ${SRCDIRLIB}/tif_next.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_next.c
	@echo Ok!
tif_open.o: ${SRCDIRLIB}/tif_open.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_open.c
	@echo Ok!
tif_packbits.o: ${SRCDIRLIB}/tif_packbits.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_packbits.c
	@echo Ok!
tif_predict.o: ${SRCDIRLIB}/tif_predict.c ${SRCDIRLIB}/tif_predict.h
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_predict.c
	@echo Ok!
tif_print.o: ${SRCDIRLIB}/tif_print.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_print.c
	@echo Ok!
tif_read.o: ${SRCDIRLIB}/tif_read.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_read.c
	@echo Ok!
tif_swab.o: ${SRCDIRLIB}/tif_swab.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_swab.c
	@echo Ok!
tif_strip.o: ${SRCDIRLIB}/tif_strip.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_strip.c
	@echo Ok!
tif_thunder.o: ${SRCDIRLIB}/tif_thunder.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_thunder.c
	@echo Ok!
tif_tile.o: ${SRCDIRLIB}/tif_tile.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_tile.c
	@echo Ok!
tif_unix.o: ${SRCDIRLIB}/tif_unix.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_unix.c
	@echo Ok!
tif_version.o: ${SRCDIRLIB}/tif_version.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_version.c
	@echo Ok!
tif_warning.o: ${SRCDIRLIB}/tif_warning.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_warning.c
	@echo Ok!
tif_write.o: ${SRCDIRLIB}/tif_write.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIRLIB}/tif_write.c
	@echo Ok!
TIFFManipulate.o: ${SRCDIR}/TIFFManipulate.c ${SRCDIR}/TIFFManipulate.h
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIR}/TIFFManipulate.c
	@echo Ok!
tiffcp.o: ${SRCDIR}/tiffcp.c
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} ${SRCDIR}/tiffcp.c
	@echo Ok!
UtlExtrFNet.o: ${SRCDIR}/UtlExtrFNet.c ${SRCDIR}/ExtrFNet.h
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} ${CFLAGS2} \
	-c ${SRCDIR}/UtlExtrFNet.c 
	@echo Ok!
ExtrFNet.o: ${SRCDIR}/ExtrFNet.c ${SRCDIR}/ExtrFNet.h ${SRCDIR}/TIFFMultipages.h
	@echo -----------------------
	@echo Construyendo $(@)
	${CC} -c ${CFLAGS} \
	-I$(MYINC2) \
	${SRCDIR}/ExtrFNet.c \
	-lm
	@echo Ok!

clean:
	rm -f ${OBJS} core a.out

